# 快速入门

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [config.yaml](file://config/config.yaml)
- [quick_start_default.md](file://config/quick_start_default.md)
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [package.json](file://package.json)
- [frontend/package.json](file://frontend/package.json)
- [frontend/electron.vite.config.ts](file://frontend/electron.vite.config.ts)
- [frontend/start-dev.sh](file://frontend/start-dev.sh)
- [build.sh](file://build.sh)
- [pyproject.toml](file://pyproject.toml)
- [opencontext.spec](file://opencontext.spec)
</cite>

## 目录
1. [环境准备](#环境准备)
2. [依赖安装](#依赖安装)
3. [配置文件设置](#配置文件设置)
4. [应用启动步骤](#应用启动步骤)
5. [5分钟上手：实践示例](#5分钟上手实践示例)
6. [默认配置项说明](#默认配置项说明)
7. [开发者贡献流程](#开发者贡献流程)
8. [常见问题解决方案](#常见问题解决方案)

## 环境准备

在开始使用本项目之前，请确保您的开发环境已正确配置。本项目需要以下核心工具和环境：

- **Python 3.9+**：项目后端使用 Python 编写，需要 Python 3.10 或更高版本（根据 `pyproject.toml` 文件中的 `requires-python = ">=3.10"` 要求）。
- **Node.js**：前端基于 Electron 构建，需要 Node.js 环境。
- **pnpm**：项目前端使用 pnpm 作为包管理器，以提高依赖安装效率。

您可以通过以下命令验证环境是否已正确安装：

```bash
python --version
node --version
pnpm --version
```

**Section sources**
- [pyproject.toml](file://pyproject.toml#L6)
- [README.md](file://README.md#L333)
- [frontend/package.json](file://frontend/package.json#L147)

## 依赖安装

项目包含前端和后端两个部分，需要分别安装其依赖。

### 安装前端依赖

进入 `frontend` 目录并使用 pnpm 安装依赖：

```bash
cd frontend
pnpm install
```

### 安装后端依赖

项目推荐使用 `uv` 工具进行依赖管理，它比传统的 `pip` 更快更可靠。

```bash
# 安装 uv（如果尚未安装）
curl -LsSf https://astral.sh/uv/install.sh | sh

# 同步依赖（会自动创建虚拟环境）
uv sync
```

您也可以使用传统的 `venv` 方式：

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -e .
```

**Section sources**
- [README.md](file://README.md#L335)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L29)
- [frontend/start-dev.sh](file://frontend/start-dev.sh#L37)

## 配置文件设置

项目的主要配置文件位于 `config/config.yaml`，您需要根据您的环境进行配置。

### 配置 API 密钥

在 `config.yaml` 文件中，您需要设置 LLM 模型的 API 密钥。项目支持 Doubao、OpenAI 和自定义模型服务。

```yaml
vlm_model:
  api_key: your-api-key
  model: doubao-seed-1-6-flash-250828

embedding_model:
  api_key: your-api-key
  model: doubao-embedding-large-text-240915
```

请将 `your-api-key` 替换为您在 [Doubao API 管理界面](https://console.volcengine.com/ark/region:ark+cn-beijing/apiKey) 获取的实际密钥。

### 配置截图捕获

如果您希望启用屏幕截图功能，请在 `config.yaml` 中修改以下配置：

```yaml
capture:
  screenshot:
    enabled: true
    capture_interval: 5
```

**Section sources**
- [config.yaml](file://config/config.yaml#L28)
- [README.md](file://README.md#L359)

## 应用启动步骤

### 开发模式启动

在开发模式下，您可以实时调试和查看应用。

```bash
# 启动后端服务
uv run opencontext start

# 或者使用自定义端口
uv run opencontext start --port 1733
```

对于前端开发，使用以下命令：

```bash
cd frontend
pnpm dev
```

### 生产模式启动

在生产模式下，应用将被打包并以优化的方式运行。

```bash
# 构建前端
pnpm build

# 打包为 macOS 应用
pnpm build:mac

# 打包为 Windows 应用
pnpm build:win
```

构建后的可执行文件将位于 `frontend/dist` 目录下。

**Section sources**
- [README.md](file://README.md#L381)
- [frontend/package.json](file://frontend/package.json#L26)

## 5分钟上手：实践示例

让我们通过一个简单的实践示例，引导您从克隆仓库到看到第一个屏幕截图捕获的全过程。

### 步骤 1：克隆仓库

```bash
git clone https://github.com/volcengine/MineContext.git
cd MineContext
```

### 步骤 2：安装依赖

```bash
# 安装后端依赖
uv sync

# 安装前端依赖
cd frontend
pnpm install
```

### 步骤 3：配置 API 密钥

编辑 `config/config.yaml` 文件，填入您的 API 密钥。

### 步骤 4：启动应用

```bash
# 返回项目根目录
cd ..

# 启动后端
uv run opencontext start --port 1733

# 在另一个终端中启动前端
cd frontend
pnpm dev
```

### 步骤 5：启用屏幕捕获

1. 打开应用，进入“屏幕监控”页面。
2. 启用系统屏幕共享权限。
3. 在“设置”中配置屏幕共享区域。
4. 点击“开始录制”，应用将每 5 秒捕获一次屏幕。

您将在“首页”看到系统自动生成的待办事项、提示和摘要。

**Section sources**
- [README.md](file://README.md#L140)
- [config.yaml](file://config/config.yaml#L44)

## 默认配置项说明

`config/quick_start_default.md` 文件提供了默认配置的说明，帮助用户理解应用的核心功能。

### 屏幕监控

此功能会定期捕获您的屏幕内容，并将其转化为智能的上下文。所有数据均存储在本地，确保隐私安全。

### 首页

首页是 MineContext 主动向您推送每日摘要、待办事项、提示等洞察的地方。这些内容均来自您收集的上下文。

- **待办事项 (Todo)**：系统会根据您的上下文自动生成待办事项。
- **提示 (Tip)**：系统会生成提示，帮助您发现上下文背后的洞察。
- **摘要 (Summary)**：系统会在每天晚上 8 点生成每日/每周摘要。

### 创作

您可以基于自己的上下文进行 AI 增强创作。更重要的是，您的创作将成为上下文的关键部分，为未来提供素材。

**Section sources**
- [quick_start_default.md](file://config/quick_start_default.md)

## 开发者贡献流程

我们欢迎社区贡献！以下是贡献代码的简明流程。

### 分支策略

请使用以下命名约定创建分支：

| 前缀 | 用途 | 示例 |
| ---- | ---- | ---- |
| `feature/` 或 `feat/` | 新功能 | `feature/add-notion-integration` |
| `fix/` | 修复 bug | `fix/screenshot-capture-error` |
| `docs/` | 文档更新 | `docs/update-api-guide` |

### 代码规范

- 遵循 [PEP 8](https://pep8.org/) 风格指南。
- 使用 `black` 和 `isort` 自动格式化代码。
- 提交前运行 `pre-commit` 钩子。

### 提交要求

1. 创建分支并进行修改。
2. 提交时使用语义化提交信息，如 `feat: add new feature`。
3. 确保所有测试通过。
4. 创建 Pull Request 并等待审核。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L91)

## 常见问题解决方案

### 端口冲突

如果端口 1733 已被占用，您可以使用 `--port` 参数指定其他端口：

```bash
uv run opencontext start --port 1734
```

### 权限错误

在 macOS 上，首次运行时需要在“系统设置”中授予屏幕录制权限。如果未正确设置，应用将无法捕获屏幕。

### 依赖安装失败

如果使用国内镜像导致依赖安装失败，请确保使用原始 PyPI 源：

```bash
pip config unset global.index-url
```

**Section sources**
- [README.md](file://README.md#L142)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L242)